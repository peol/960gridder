/* Release: 1.2 2009-03-28 */

/*
 * Copyright (c) Andrée Hansson (peolanha AT gmail DOT com)
 * MIT License - http://www.opensource.org/licenses/mit-license.php
 * Idea loosely based on JASH, http://billyreisinger.com/jash/
 *
 * Changelog:
 * - Too many changes to be mentioned, most of it reworked from scratch!
 */
function createObject(a,c,d){var e=document.createElement(a);for(var b in d){if((b=="src"||b=="href")&&d.noCache){d[b]=d[b]+"?"+(new Date()).getTime()}if(b!="noCache"){e[b]=d[b]}}document.getElementsByTagName(c)[0].appendChild(e)}function Grid(){window.gridSettingsDef={urlBase:"http://960gridder.keep.se/releases/1.2/",gColor:"#EEEEEE",gColorHover:"#EEEEEE",gColumns:12,gOpacity:0.35,gOpacityHover:0.9,gWidth:10,pColor:"#C0C0C0",pColorHover:"#000000",pHeight:15,pOffset:0,pOpacity:0.55,pOpacityHover:0.2,center:true,gEnabled:true,pEnabled:true,size:960,showWarning:true};if(typeof(window.gridSettings)=="undefined"){window.gridSettings={}}for(var a in window.gridSettingsDef){if(typeof(window.gridSettings[a])=="undefined"){window.gridSettings[a]=window.gridSettingsDef[a]}}if(typeof(window.jQuery)=="undefined"||jQuery().jquery.match(new RegExp("^1.3"))===null){if(typeof(window.jQuery)!="undefined"&&window.gridSettings.showWarning){alert("Warning!\njQuery version on this website is too old for 960 Gridder.\nIt has been replaced by the latest version.")}window.jQuery=undefined;createObject("script","body",{type:"text/javascript",src:window.gridSettings.urlBase+"jquery.js",noCache:false})}createObject("link","head",{rel:"stylesheet",type:"text/css",media:"all",href:window.gridSettings.urlBase+"jquery.gridder.css",noCache:false});this.setupWindow=function(){$('<div id="g-setup"><ul id="g-setup-head" class="clearfix"><li class="title">960 Gridder</li><li class="switch"><a href="javascript:void(0);">Show</a></li></ul><div id="g-setup-content" class="clearfix"><div class="clearfix"><div class="g-setup-left-column"><p class="grouphead">Gutter</p><div class="inputwrap clearfix"><p class="inputdesc">Color</p><input id="g-setup-gColor" /></div><div class="inputwrap clearfix"><p class="inputdesc">Opacity</p><input id="g-setup-gOpacity" /></div><div class="inputwrap clearfix"><p class="inputdesc">Width</p><input id="g-setup-gWidth" /></div><div class="inputwrap clearfix"><p class="inputdesc">Columns</p><input id="g-setup-gColumns" /></div></div><div class="g-setup-right-column"><p class="grouphead">Paragraph</p><div class="inputwrap clearfix"><p class="inputdesc">Color</p><input id="g-setup-pColor" /></div><div class="inputwrap clearfix"><p class="inputdesc">Opacity</p><input id="g-setup-pOpacity" /></div><div class="inputwrap clearfix"><p class="inputdesc">Height</p><input id="g-setup-pHeight" /></div><div class="inputwrap clearfix"><p class="inputdesc">Offset</p><input id="g-setup-pOffset" /></div></div></div><p class="grouphead">Miscellaneous</p><div class="input-wrap clearfix input-check"><p class="inputdesc">Center the Grid</p><input id="g-setup-center" type="checkbox" /></div><div class="input-wrap clearfix input-check"><p class="inputdesc">Enable gutters (vertical)</p><input id="g-setup-gEnabled" type="checkbox" /></div><div class="input-wrap clearfix input-check"><p class="inputdesc">Enable paragraphs (horizontal)</p><input id="g-setup-pEnabled" type="checkbox" /></div></div>').appendTo("body");for(var b in window.gridSettings){if($("#g-setup-"+b).length!==0){if($("#g-setup-"+b).parent().is(".input-check")){$("#g-setup-"+b).attr("checked","checked")}else{$("#g-setup-"+b).val(window.gridSettings[b])}}}jQuery("#g-setup .switch a").click(function(){window.grid.toggleSetupWindow()});jQuery("#g-setup").css("top",jQuery(window).scrollTop());$("#g-setup input").keyup(function(){window.grid.setVariable($(this).attr("id").replace("g-setup-",""),$(this).val())});$("#g-setup .input-check input").click(function(){window.grid.setVariable($(this).attr("id").replace("g-setup-",""),$(this).attr("checked"))});jQuery(window).scroll(function(){jQuery("#g-setup").css("top",jQuery(window).scrollTop())});window.gridSettings.height=jQuery(document).height()};this.setVariable=function(b,c){if(isNaN(parseInt(c,10))||parseInt(c,10)===0){window.gridSettings[b]=c}else{window.gridSettings[b]=parseInt(c,10)}if(c===true){$("#g-setup-"+b).attr("checked","checked")}else{if(c===false){$("#g-setup-"+b).removeAttr("checked")}else{$("#g-setup-"+b).val(c)}}window.grid.createGrid()};this.toggleSetupWindow=function(){if(jQuery("#g-setup-content").is(":visible")){jQuery("#g-setup .switch a").text("Show");jQuery("#g-setup-content").slideUp()}else{jQuery("#g-setup .switch a").text("Hide");jQuery("#g-setup-content").slideDown()}};this.createGrid=function(){jQuery("#g-grid, #g-grid *").remove();jQuery('<div id="g-grid"></div>').appendTo("body").css("width",window.gridSettings.size);if(window.gridSettings.center){jQuery("#g-grid").css({left:"50%",marginLeft:-((window.gridSettings.size/2)+window.gridSettings.gWidth)})}if(window.gridSettings.gEnabled&&window.gridSettings.gColumns>0){for(a=0;a<=window.gridSettings.gColumns;a++){jQuery('<div class="g-vertical"></div>').appendTo("#g-grid").css({left:((window.gridSettings.size/window.gridSettings.gColumns)*a),height:window.gridSettings.height,width:(window.gridSettings.gWidth*2),backgroundColor:window.gridSettings.gColor,opacity:window.gridSettings.gOpacity})}}if(window.gridSettings.pEnabled&&window.gridSettings.pHeight>1){horColumns=((window.gridSettings.height-window.gridSettings.pOffset)/window.gridSettings.pHeight);for(a=0;a<=horColumns;a++){jQuery('<div class="g-horizontal"></div>').appendTo("#g-grid").css({top:((window.gridSettings.height/horColumns)*a)+window.gridSettings.pOffset,left:"50%",marginLeft:-(window.gridSettings.size/2),width:(window.gridSettings.size+(window.gridSettings.gWidth*2)),backgroundColor:window.gridSettings.pColor,opacity:window.gridSettings.pOpacity})}}}}checkJQuery=function(){if(typeof(window.jQuery)=="undefined"){setTimeout(function(){checkJQuery()},10)}else{window.grid.setupWindow();window.grid.createGrid()}};if(typeof(window.grid)=="undefined"){window.grid=new Grid();checkJQuery()}else{window.grid.toggleSetupWindow()};